<!DOCTYPE html>
<html>
	<head>
		<script src="//cdn.optimizely.com/js/292196089.js"></script>
		<script type="text/javascript">
			var _kmq = _kmq || [];
			if (window.location.hostname == 'cloudcannon.com') {
				var _kmk = _kmk || '91784a2be9aace964472e67be67e01b9ed132fd0';
			} else {
				var _kmk = _kmk || '1d8a7843f558e736566c55699b0f04468eb1f676';
			}

			function _kms(u){
				setTimeout(function(){
					var d = document, f = d.getElementsByTagName('script')[0],
					s = d.createElement('script');
					s.type = 'text/javascript'; s.async = true; s.src = u;
					f.parentNode.insertBefore(s, f);
				}, 1);
			}
			_kms('//i.kissmetrics.com/i.js');
			_kms('//doug1izaerwt3.cloudfront.net/' + _kmk + '.1.js');
		</script>

		<script type="text/javascript">
		  	if (window.location.hostname == 'cloudcannon.com') {
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-37472773-1', 'auto');
			  ga('require', 'linkid', 'linkid.js');
			  ga('send', 'pageview');
			}

		</script>

		<script type="text/javascript">
		if (window.location.hostname == 'cloudcannon.com') {
			var mixpanel_key = "ddc346a4ade4fff2e0fc23f9504d571f";
		} else {
			var mixpanel_key = "a2d6b29236e84ca7c6a1505e21677c81";
		}
			(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
			for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
			mixpanel.init(mixpanel_key);
		</script>

		<script type="text/javascript">
			if (window.location.hostname == 'cloudcannon.com') {
		      (function() {
		        window._pa = window._pa || {};
		        var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
		        pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.perfectaudience.com/serve/53e952a70249f7f551000011.js";
		        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
		      })();
		    }
	    </script>

		<meta charset="utf-8" />
		<meta name="description" content="CloudCannon takes the pain out of uploading and maintaining websites, so you can focus on creating beautiful designs">
		<meta name="HandheldFriendly" content="True">
		<meta name="MobileOptimized" content="320">
		<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="google-site-verification" content="GkBrJRSQqF43wQVGLUeUJFTPBldtIXGCw9toqvS2o_o" />

		<meta property="og:site_name" content="CloudCannon" />
		<meta property="og:image" content="http://cloudcannon.com/img/cloud_cannon_logo.png" />

		<title>
				 How Pixelapse image blurring works | CloudCannon
		</title>
		<link rel="alternate" type="application/rss+xml" title="cloudcannon.com" href="http://cloudcannon.com/feed/">
		<link href='http://fonts.googleapis.com/css?family=Raleway:700,300' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="/css/style.css" />
		<link rel="stylesheet" href="/css/prettify.css"  />
		<link rel="stylesheet" href="/css/smileys.css"  />

	</head>
	<body>
		<nav>
			<div class="container">
				<h1>
					<a href="/"
							
							>
						<img src="/img/logo.png" width="68" height="46" alt="CloudCannon" />
					</a>
				</h1>
				<div id="menu">
					<ul class="site">
						<li><a href="/pricing"
							
							>Pricing</a></li>
						<li><a href="/blog"
 							
 							>Blog</a></li>
						<li><a href="/docs"
							
							>Docs</a></li>
						<li><a href="/about"
							
							>About</a></li>

					</ul>

					<ul class="user">
						<li><a href="https://app.cloudcannon.com/">Log in</a></li>
						<li><a href="https://app.cloudcannon.com/users/sign_up" class="sign-up">Sign Up</a></li>
					</ul>
				</div>

				<a id="menu-toggle" href="#">&#9776;</a>
			</div>
		</nav>

		
			<header>
				<div class="container">
					<h2 class="lone-header">Pixelapse blurred Image deconstruction</h2>
				</div>
			</header>
		

		<section>
	<div class="container post-container text-container">
		<div class="post-nav">
			<div class="blog-shares">
				<a target="_blank" class="twitter" href="https://twitter.com/home?status=Pixelapse+blurred+Image+deconstruction%20http%3A%2F%2Fcloudcannon.com%2Fdeconstructions%2F2014%2F11%2F19%2Fpixelapse-blurred-image-deconstruction.html%20via%20@CloudCannonApp">Share on Twitter</a>
				<a target="_blank" class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fcloudcannon.com%2Fdeconstructions%2F2014%2F11%2F19%2Fpixelapse-blurred-image-deconstruction.html">Share on Facebook</a>
			</div>
			<a href="/blog">&larr; Return to Blog</a> 
		</div>
		<p class="post-details"><a href="/blog">Blog</a> | Deconstructions | Pixelapse blurred Image deconstruction <span class="date">November 19, 2014</span></p>
		<p>The last deconstruction about the <a href="/deconstructions/2014/11/15/facebook-content-placeholder-deconstruction.html">Facebook content placeholder</a> seemed to be popular so here’s my next one. I recently discovered a fantastic start up called <a href="https://www.pixelapse.com/">Pixelapse</a> and the level of polish on their site was outstanding. Today I am doing a deconstruction on something I found there.</p>

<h3 id="what-is-it">What is it?</h3>
<p>As I roamed through the great community designs I noticed the cover images blurred as I scrolled. I immediately thought that they were dynamically blurring images with a canvas but my browser wasn’t getting crippled. So I took a look and the result was very pleasing. Here’s my clone:</p>

<div class="pixelapse-image scroll-blurred">
	<div class="the-blurred-image"></div>
	<div class="the-nice-crisp-image"></div>
</div>

<pre class="prettyprint linenums large">
&lt;div class="pixelapse-image"&gt;
	&lt;div class="the-blurred-image"&gt;&lt;/div&gt;
	&lt;div class="the-nice-crisp-image"&gt;&lt;/div&gt;
&lt;/div&gt;
</pre>

<pre class="prettyprint linenums large">
.the-blurred-image, 
.the-nice-crisp-image,
.pixelapse-image {
	width: 100%;
	height: 300px;
	position: relative;
}

.the-blurred-image, 
.the-nice-crisp-image {
	background: url("blurry-golden-gate.jpg") no-repeat center;
	background-size: cover; /* This here is why I used divs instead of images */
}

.the-nice-crisp-image {
	background-image: url("crisp-golden-gate.jpg");
}
</pre>

<p>Just two divs with background images, that’s amazing and explains the why the performance was so good. I got this one from <a href="http://www.pexels.com/">Pexels</a> which doesn’t need attribution but I think they deserve it.</p>

<h4 id="a-nice-crisp-image">A Nice Crisp Image</h4>
<p>This is the image you want to use, just as you want to show it normally with no blurring. 
You will be overlaying this over the next image. Here’s my one:</p>

<div class="the-nice-crisp-image"></div>

<h4 id="a-small-blurred-image">A Small Blurred Image</h4>
<p>This is the same image as the one above only I have blurred it. This image will be sitting behind the crisp version and will never change.</p>

<div class="the-blurred-image"></div>

<h4 id="the-magic">The Magic</h4>
<p>Instead of dynamically blurring the image, all it’s doing is fading the crisp image in and out. Here’s the logic for scrolling:</p>

<pre class="prettyprint linenums large">
$(window).on("scroll", function () {
	$(".scroll-blurred").each(function () {
		var offset = $(this).offset();

		// Change top to be the center of the element
		offset.top += $(this).outerHeight() / 2; 

		// Get the center of the screen
		var centerOfTheScreen = window.scrollY + $(window).height() / 2;

		// Check the distance between the center of the screen and out images
		var distanceFromCenter = Math.abs(centerOfTheScreen - offset.top);
		
		// Calculate the opacity with {BLUR_RANGE} pixels away being 1
		var opacity = Math.min(distanceFromCenter, BLUR_RANGE) / BLUR_RANGE;

		// Set the opacity (inverse last calculation so that it 
		// fades in as you approach the center)
		$(this).find(".the-nice-crisp-image").css("opacity", 1 - opacity);
	});
});
</pre>

<p>This is a version using jQuery so I can demonstrate the logic cleanly. To optimise this you should <a href="http://www.html5rocks.com/en/tutorials/speed/animations/#debouncing-scroll-events">debounce the scroll events</a> by using <a href="http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/">requestAnimationFrame</a>.</p>

<p>To demonstrate the the same effect, Below is a pure CSS implementation using the hover state and some nice CSS transitions (try hovering). I reversed the effect so the default is the crisp image, added a glow and added a greeting.</p>

<div class="do-it-on-hover-instead pixelapse-image">
	<div class="the-blurred-image">Hi There</div>
	<div class="the-nice-crisp-image"></div>
</div>

<pre class="prettyprint linenums large">
.do-it-on-hover-instead .the-blurred-image,
.do-it-on-hover-instead .the-nice-crisp-image {
	opacity: 0.7;
	transition: all 0.9s ease-in-out;
}

.do-it-on-hover-instead:hover .the-nice-crisp-image {
	opacity: 0;
}

.do-it-on-hover-instead:hover .the-blurred-image {
	box-shadow: inset 0 0 30px #C89F69;
}
</pre>

<h3 id="why-would-i-ever-use-this">Why would I ever use this?</h3>
<p>This is a great way for setting the focus on the hovered element and one that people will remember. The other way I would use this same effect is so that I can load the blurred version with a lower resolution then preload the larger crisp image over the top. The user doesn’t necessarily suffer as the image is loading and can still use the site as it loads.</p>

<h3 id="thats-it">That’s it</h3>
<p>This was a clever way to polish the UI without impacting on the performance of the page. This fits the tune of the rest of <a href="https://www.pixelapse.com/">Pixelapse</a> which is beautifully polished. Definitely worth checking out for the idea and the designs. If you found this useful or have any questions feel free to comment below.</p>

<p>Note: I used unprefixed CSS in the code examples to keep it clean. You can use <a href="http://prefixr.cloudvent.net/" target="_blank">Our CSS Prefixer</a> to get cross a cross browser version.</p>

<style>
	.the-blurred-image, 
	.the-nice-crisp-image,
	.pixelapse-image {
		width: 100%;
		height: 300px;
		line-height: 300px;
		text-align: center;
		color: #fff;
		position: relative;
		font-size: 2em;
		font-weight: bold;
	}

	.the-blurred-image, 
	.the-nice-crisp-image {
		background: url("/img/blog/deconstructions/blurry-golden-gate.jpg") no-repeat center;
		-webkit-background-size: cover;
		background-size: cover;
	}

	.the-nice-crisp-image {
		background-image: url("/img/blog/deconstructions/crisp-golden-gate.jpg");
	}
	
	.pixelapse-image .the-blurred-image, 
	.pixelapse-image .the-nice-crisp-image {
		position: absolute;
		top: 0;
		left: 0;
	}

	.pixelapse-image .the-nice-crisp-image {
		opacity: 0;
	}
	
	.do-it-on-hover-instead .the-blurred-image,
	.do-it-on-hover-instead .the-nice-crisp-image {
		opacity: 0.7;
		-webkit-transition: all 0.9s ease-in-out;
		transition: all 0.9s ease-in-out;
	}

	.do-it-on-hover-instead:hover .the-nice-crisp-image {
		opacity: 0;
	}

	.do-it-on-hover-instead:hover .the-blurred-image {
		-webkit-box-shadow: inset 0 0 30px #C89F69;
		box-shadow: inset 0 0 30px #C89F69;
	}
</style>

<script>
(function (window) {
    var lastTime = 0;
    var vendors = ['webkit', 'moz'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame =
          window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() { callback(currTime + timeToCall); },
              timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };

    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}(window));

(function (window) {
	var BLUR_RANGE = 300;
	var latestKnownScrollY = 0,
		ticking = false;

	function onScroll() {
		latestKnownScrollY = window.scrollY;
		requestTick();
	}

	function requestTick() {
		if(!ticking) {
			requestAnimationFrame(update);
		}
		ticking = true;
	}

	function update() {
		ticking = false;

		var currentScrollY = latestKnownScrollY;

		$(".scroll-blurred").each(function () {
			var offset = $(this).offset();

			// Change top to be the center of the element
			offset.top += $(this).outerHeight() / 2; 

			// Get the center of the screen
			var centerOfTheScreen = window.scrollY + $(window).height() / 2;

			// Check the distance between the center of the screen and out images
			var distanceFromCenter = Math.abs(centerOfTheScreen - offset.top);
			
			// Calculate the opacity with {BLUR_RANGE} pixels away being 1
			var opacity = Math.min(distanceFromCenter, BLUR_RANGE) / BLUR_RANGE;

			// Set the opacity (inverse last calculation so that it fades in as you approach the center)
			$(this).find(".the-nice-crisp-image").css("opacity", 1 - opacity);
		});
	}

	window.addEventListener('scroll', onScroll, false);
}(window));
</script>



		
		<div class="post-author">
			
				<img src="/img/george.jpg" alt="A stunning photo of George" width="200" height="200">
<h3>George Phillips <a target="_blank" href="https://twitter.com/intent/user?screen_name=gphillips_nz">@gphillips_nz</a></h3>
<p>George is the CTO of CloudCannon. He is a passionate self taught designer with a BSc in Computer Science. He will most likely post blogs about HTML/CSS, JavaScript or anything even remotely connected with Web Design.</p>
			
		</div>
		

		<div id="disqus_thread"></div>
	    <script type="text/javascript">
	        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	        var disqus_shortname = 'cloudcannon'; // required: replace example with your forum shortname

	        /* * * DON'T EDIT BELOW THIS LINE * * */
	        (function() {
	            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	        })();
	    </script>
	    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
</section>
		<section class="vibrant footer centered">
				
			<a href="https://twitter.com/cloudcannonapp" class="social-icon twitter">Twitter</a>
			<a href="http://www.facebook.com/CloudCannon" class="social-icon facebook">Facebook</a>

			<ul class="footer_links">
				<li><a href="/">Home</a></li>
				<li><a href="/pricing">Pricing</a></li>
				<li><a href="/docs">Docs</a></li>
				<li><a href="/blog">Blog</a></li>
				<li><a href="/faq">FAQ</a></li>
				<li><a href="/about">About</a></li>
				<li><a href="/freebies">Freebies</a></li>
				<li><a href="/press">Press</a></li>
				<li><a href="/contact">Contact</a></li>
			</ul>
			<p class="t-and-c">
				&copy; 2014 CloudCannon Limited. |
				<a href="https://app.cloudcannon.com/terms">Terms</a> &amp;
				<a href="https://app.cloudcannon.com/privacy_policy">Privacy</a>
			</p>
		</section>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<script type="text/javascript" src="/js/prettify/prettify.js"></script>
		<script src="/js/smileys.js"></script>
		<script src="/js/layout.js"></script>
		<script type="text/javascript">
		if (window.location.hostname == 'cloudcannon.com') {
		   var _mfq = _mfq || [];
		   (function() {
		       var mf = document.createElement("script"); mf.type = "text/javascript"; mf.async = true;
		       mf.src = "//cdn.mouseflow.com/projects/cd2d27dc-58e2-46f6-89e5-0eb971d2384e.js";
		       document.getElementsByTagName("head")[0].appendChild(mf);
		   })();
   		}
</script>
	</body>
</html>
